<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <title>Vendor Personal Information</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
        <script src="https://unpkg.com/@popperjs/core@2"></script>
        <script src="https://unpkg.com/tippy.js@6"></script>
        <link href="https://unpkg.com/tippy.js@6/dist/tippy.css" rel="stylesheet"/>
        <link href="https://unpkg.com/tippy.js@6/themes/light.css" rel="stylesheet"/>
        <link href="https://unpkg.com/tippy.js@6/animations/scale.css" rel="stylesheet"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        <link rel="stylesheet" href="../css/styles.css">
        <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
        <style>
            /* Success message animation */
            .success-message {
                animation: slideInDown 0.5s ease-out;
            }
            
            @keyframes slideInDown {
                from {
                    opacity: 0;
                    transform: translateY(-20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>
    </head>
<body class="min-h-screen bg-sky-50">
    <!-- Include header -->
    <div id="header-container"></div>

    <!-- Include navigation -->
    <div id="nav-container"></div>

    <!-- Success Message -->
    <div id="successMessage" class="hidden fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 success-message">
        <div class="flex items-center">
            <i class="fas fa-check-circle mr-2"></i>
            <span>Vendor information saved successfully!</span>
        </div>
    </div>

    <main class="p-4">
        <div class="flex justify-between items-center mb-4">
            <a href="../accounts/vendor-details.html" class="text-gray-600 flex items-center">
                <i class="fas fa-chevron-left text-lg"></i>
                <span class="ml-2 font-semibold">Back</span>
            </a>
            <h1 class="text-s font-semibold">Personal Information</h1>
        </div>

        <form id="vendorPersonalForm" class="bg-white rounded-lg shadow p-6 space-y-6">
            <!-- Vendor Name Section -->
            <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">Vendor Name</label>
                <div class="flex space-x-2">
                    <div class="flex-1">
                        <input type="text" id="vendorFirstName" placeholder="First Name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="flex-1">
                        <input type="text" id="vendorLastName" placeholder="Last Name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>
            </div>

            <!-- Address Section -->
            <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">Home Address</label>
                <input type="text" id="vendorAddress" placeholder="Street Address" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <div class="flex space-x-2">
                    <div class="flex-1">
                        <input type="text" id="vendorCity" placeholder="City" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="w-24">
                        <input type="text" id="vendorState" placeholder="State" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="w-24">
                        <input type="text" id="vendorZip" placeholder="Zip" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">Contact Information</label>
                <input type="email" id="vendorEmail" placeholder="Email Address" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <input type="tel" id="vendorPhone" placeholder="Phone Number" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Contact Person -->
            <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">Contact Person</label>
                <div class="flex space-x-2">
                    <div class="flex-1">
                        <input type="text" id="contactFirstName" placeholder="First Name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="flex-1">
                        <input type="text" id="contactLastName" placeholder="Last Name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>
                <input type="email" id="contactEmail" placeholder="Email Address" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <input type="tel" id="contactPhone" placeholder="Phone Number" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Save Button -->
            <div class="pt-4">
                <button type="submit" class="w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition-colors font-medium">
                    <i class="fas fa-save mr-2"></i> Save Changes
                </button>
            </div>
        </form>
    </main>

    <script>
        // Load header and navigation
        fetch('../nav/header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header-container').innerHTML = data;
            });
        fetch('../nav/navigation.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('nav-container').innerHTML = data;
            });

        // Load vendor data from localStorage
        function loadVendorData() {
            const vendorData = localStorage.getItem('selectedVendor');
            if (vendorData) {
                const vendor = JSON.parse(vendorData);
                
                // Populate vendor name
                const vendorNameParts = vendor.vendorName ? vendor.vendorName.split(' ') : ['', ''];
                document.getElementById('vendorFirstName').value = vendorNameParts[0] || '';
                document.getElementById('vendorLastName').value = vendorNameParts.slice(1).join(' ') || '';
                
                // Populate address
                document.getElementById('vendorAddress').value = vendor.address || '';
                document.getElementById('vendorCity').value = vendor.city || '';
                document.getElementById('vendorState').value = vendor.state || '';
                document.getElementById('vendorZip').value = vendor.zip || '';
                
                // Populate contact information
                document.getElementById('vendorEmail').value = vendor.email || '';
                document.getElementById('vendorPhone').value = vendor.phone || '';
                
                // Populate contact person
                const contactParts = vendor.contactPerson ? vendor.contactPerson.split(' ') : ['', ''];
                document.getElementById('contactFirstName').value = contactParts[0] || '';
                document.getElementById('contactLastName').value = contactParts.slice(1).join(' ') || '';
                document.getElementById('contactEmail').value = vendor.email || '';
                document.getElementById('contactPhone').value = vendor.phone || '';
            }
        }

        // Save vendor data
        function saveVendorData(formData) {
            const vendorData = localStorage.getItem('selectedVendor');
            let vendor = vendorData ? JSON.parse(vendorData) : {};
            
            // Update vendor data with form values
            vendor.vendorName = `${formData.vendorFirstName} ${formData.vendorLastName}`.trim();
            vendor.address = formData.vendorAddress;
            vendor.city = formData.vendorCity;
            vendor.state = formData.vendorState;
            vendor.zip = formData.vendorZip;
            vendor.email = formData.vendorEmail;
            vendor.phone = formData.vendorPhone;
            vendor.contactPerson = `${formData.contactFirstName} ${formData.contactLastName}`.trim();
            
            // Save back to localStorage
            localStorage.setItem('selectedVendor', JSON.stringify(vendor));
            
            // Show success message
            showSuccessMessage();
        }

        // Show success message
        function showSuccessMessage() {
            const successMessage = document.getElementById('successMessage');
            successMessage.classList.remove('hidden');
            
            // Hide after 3 seconds
            setTimeout(() => {
                successMessage.classList.add('hidden');
            }, 3000);
        }

        // Handle form submission
        document.getElementById('vendorPersonalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                vendorFirstName: document.getElementById('vendorFirstName').value,
                vendorLastName: document.getElementById('vendorLastName').value,
                vendorAddress: document.getElementById('vendorAddress').value,
                vendorCity: document.getElementById('vendorCity').value,
                vendorState: document.getElementById('vendorState').value,
                vendorZip: document.getElementById('vendorZip').value,
                vendorEmail: document.getElementById('vendorEmail').value,
                vendorPhone: document.getElementById('vendorPhone').value,
                contactFirstName: document.getElementById('contactFirstName').value,
                contactLastName: document.getElementById('contactLastName').value,
                contactEmail: document.getElementById('contactEmail').value,
                contactPhone: document.getElementById('contactPhone').value
            };
            
            saveVendorData(formData);
        });

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadVendorData();
        });
    </script>
</body>
</html> 